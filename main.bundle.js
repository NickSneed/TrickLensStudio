/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{"use strict";var e,n,t,r={171(e,n,t){t.d(n,{A:()=>p});var r=t(601),o=t.n(r),a=t(314),i=t.n(a),l=t(417),c=t.n(l),u=new URL(t(14),t.b),s=new URL(t(399),t.b),d=i()(o()),f=c()(u),m=c()(s);d.push([e.id,`:root {\n    /* main ui */\n    --c-copy: #171717;\n    --c-messagecopy: #4b4b4b;\n    --c-background: #cfcfcf;\n    --c-button: #aaa;\n    --c-canvasoutlinelight: color-mix(in srgb, var(--c-background) 60%, #fff);\n    --c-canvasoutlinedark: color-mix(in srgb, var(--c-background) 80%, #000);\n\n    /* modal */\n    --c-modal: #aaa;\n    --c-modalcopy: var(--c-copy);\n\n    /* toobar colors */\n    --c-green: #169e78;\n    --c-yellow: #f4c901;\n    --c-red: #c20000;\n    --c-blue: #2c51ac;\n\n    /* fonts */\n    --f-regular: 'DogicaPixel', sans-serif;\n    --f-bold: 'DogicaPixelBold', sans-serif;\n\n    /* Other */\n    --c-white: #fff;\n    --c-black: #000;\n    --c-gray: #333;\n\n    /* buttons */\n    --c-buttonoutline: color-mix(in srgb, var(--c-button) 10%, #000);\n\n    /* input */\n    --c-inputoutline: #171717;\n    --c-inputback: #fff;\n    --c-inputcolor: #171717;\n}\n\nbody[data-theme='dark'] {\n    --c-background: #1f1f1f;\n    --c-canvasoutlinelight: color-mix(in srgb, var(--c-background) 90%, #fff);\n    --c-canvasoutlinedark: color-mix(in srgb, var(--c-background) 50%, #000);\n    --c-modal: #141414;\n    --c-modalcopy: #858585;\n    --c-inputback: #2b2b2b;\n    --c-inputoutline: #8c8c8c;\n    --c-inputcolor: #cacaca;\n}\n\n@font-face {\n    font-family: 'DogicaPixel';\n    src: url(${f}) format('woff2');\n    font-weight: 400;\n    font-style: normal;\n    font-display: swap;\n}\n\n@font-face {\n    font-family: 'DogicaPixelBold';\n    src: url(${m}) format('woff2');\n    font-weight: 800;\n    font-style: bold;\n    font-display: swap;\n}\n\nhtml,\nbody {\n    scrollbar-gutter: stable !important;\n}\n\nbody {\n    background-color: var(--c-background);\n    color: var(--c-copy);\n    font-family: sans-serif;\n    font-size: 16px;\n    font-weight: normal;\n    padding: 20px 10px;\n    font-family: var(--f-regular);\n    font-weight: 400;\n    font-style: normal;\n    letter-spacing: 0;\n}\n\ndiv {\n    box-sizing: border-box;\n}\n\nh1,\nh2,\nh3 {\n    font-family: var(--f-bold);\n}\n\nselect {\n    background: var(--c-inputback);\n    border: 2px solid var(--c-inputoutline);\n    color: var(--c-inputcolor);\n    font-size: inherit;\n    font-family: var(--f-regular);\n    padding: 0.5em;\n    width: 100%;\n}\n\nbutton {\n    cursor: pointer;\n    font-family: 'DogicaPixel';\n    padding: 0;\n}\n\n.button {\n    background-color: var(--c-button);\n    border: none;\n    border-top: 4px solid var(--c-buttonoutline);\n    border-bottom: 4px solid var(--c-buttonoutline);\n    box-sizing: border-box;\n    box-shadow: inset 0 -4px 0 0 color-mix(in srgb, var(--c-button) 50%, #000);\n    color: var(--c-copy);\n    display: block;\n    font-size: inherit;\n    font-family: var(--f-regular);\n    height: 3.5em;\n    padding: 0.8em 0.8em 1.5em 0.8em;\n    position: relative;\n    width: 100%;\n}\n\n.button:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -4px;\n    width: 100%;\n    height: 100%;\n    border-right: 4px solid var(--c-buttonoutline);\n    border-left: 4px solid var(--c-buttonoutline);\n}\n\n.button:before {\n    border: 4px solid color-mix(in srgb, var(--c-button) 30%, #fff);\n    border-top: none;\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: calc(100% - 8px);\n    height: calc(100% - 8px);\n}\n\n@media (hover: hover) {\n    .button:hover {\n        background-color: color-mix(in srgb, var(--c-button) 60%, #fff);\n    }\n}\n\n.button:active {\n    transform: translatey(4px);\n}\n\n.closeButton,\n.closeButton:hover {\n    background: var(--c-modalcopy);\n    display: block;\n    border: none;\n    color: var(--c-modal);\n    font-family: var(--f-regular);\n    font-size: 16px;\n    height: 30px;\n    line-height: 1;\n    padding: 0;\n    width: 30px;\n}\n\n.colorgreen {\n    background-color: var(--c-green);\n}\n\n.coloryellow {\n    background-color: var(--c-yellow);\n}\n\n.colorred {\n    background-color: var(--c-red);\n    color: #fff;\n}\n\n.colorblue {\n    background-color: var(--c-blue);\n    color: #fff;\n}\n\n.fontBold {\n    font-family: var(--f-bold);\n}\n\nlabel {\n    cursor: pointer;\n    display: block;\n}\n\n.photoGrid {\n    padding: 0 0 19em;\n    display: grid;\n    column-gap: 0.4em;\n    row-gap: 1em;\n}\n\n.mainMessage {\n    color: var(--c-messagecopy);\n    font-family: var(--f-bold);\n    height: 70%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    left: 0;\n    position: fixed;\n    top: 0;\n    width: 100%;\n    z-index: 1;\n}\n@media (min-width: 1280px) {\n    body {\n        padding: 40px 20px;\n    }\n\n    .mainMessage {\n        height: 100%;\n    }\n\n    .photoGrid {\n        padding: 0 0 6em;\n        column-gap: 1em;\n    }\n}\n\n.pixel-checkbox {\n    display: block;\n    cursor: pointer;\n}\n\n.pixel-checkbox input {\n    position: absolute;\n    opacity: 0;\n    cursor: pointer;\n    height: 0;\n    width: 0;\n}\n\n.pixel-checkbox span {\n    background-color: var(--c-inputback);\n    border: 2px solid var(--c-inputoutline);\n    display: inline-block;\n    height: 18px;\n    margin-right: 0.5em;\n    position: relative;\n    vertical-align: middle;\n    width: 18px;\n}\n\n.pixel-checkbox input:checked ~ span:after {\n    content: '';\n    position: absolute;\n    left: 5px;\n    top: 1px;\n    width: 4px;\n    height: 10px;\n    border: solid var(--c-inputcolor);\n    border-width: 0 3px 3px 0;\n    transform: rotate(45deg);\n}\n\n.pixel-checkbox input:disabled ~ span {\n    cursor: not-allowed;\n    background-color: color-mix(in srgb, var(--c-inputback) 50%, #000);\n    border-color: color-mix(in srgb, var(--c-inputoutline) 50%, #000);\n}\n\n.modal-open {\n    overflow: hidden;\n}\n`,""]);const p=d},713(e,n,t){t.d(n,{Ay:()=>m,Lt:()=>s,aw:()=>d,hs:()=>f,jW:()=>c,ne:()=>u,sH:()=>l});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,".EditModal-module__editWrapper--Fe9C0 {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    margin: 0 auto;\n    max-width: 56em;\n}\n\n.EditModal-module__photo--aGGqS {\n    height: auto;\n    flex-grow: 1;\n    margin: 0 0 0.5em;\n    min-height: 0;\n    touch-action: none;\n}\n\n.EditModal-module__photo--aGGqS button {\n    margin: 0 auto 0;\n    max-width: 13em;\n}\n\n.EditModal-module__controls--zFLUl {\n    display: flex;\n    flex-direction: column;\n    padding: 2em 0 0;\n}\n\n.EditModal-module__select--iH2B_,\n.EditModal-module__slider--P4zeg {\n    margin: 0.5em 0 1em 0;\n    display: block;\n    width: 100%;\n}\n\n.EditModal-module__scale--O2iiT canvas {\n    height: 100% !important;\n    margin-bottom: 2em;\n    width: 100% !important;\n}\n\n@media (min-width: 1280px) {\n    .EditModal-module__editWrapper--Fe9C0 {\n        flex-direction: row;\n    }\n\n    .EditModal-module__photo--aGGqS {\n        max-width: 40em;\n    }\n\n    .EditModal-module__controls--zFLUl {\n        flex-basis: 200px;\n        flex-shrink: 0;\n        margin-left: 2em;\n        padding-top: 0;\n    }\n}\n",""]);var l="EditModal-module__editWrapper--Fe9C0",c="EditModal-module__photo--aGGqS",u="EditModal-module__controls--zFLUl",s="EditModal-module__select--iH2B_",d="EditModal-module__slider--P4zeg",f="EditModal-module__scale--O2iiT";const m=i},963(e,n,t){t.d(n,{Ay:()=>u,Q5:()=>l,TF:()=>c});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,".FileLoader-module__fileLoader--bKT0o {\n    position: relative;\n}\n\n.FileLoader-module__fileLoader--bKT0o input {\n    display: none;\n}\n\n.FileLoader-module__fileLoader--bKT0o button:not(.FileLoader-module__remove--eBBq8) {\n    padding-right: 50px !important;\n    text-align: left;\n}\n\n.FileLoader-module__fileLoader--bKT0o .FileLoader-module__remove--eBBq8 {\n    background: var(--c-buttonoutline);\n    color: var(--c-white);\n    display: none;\n    position: absolute;\n    right: 0.5em;\n    top: 0.5em;\n}\n",""]);var l="FileLoader-module__fileLoader--bKT0o",c="FileLoader-module__remove--eBBq8";const u=i},197(e,n,t){t.d(n,{Ay:()=>m,EX:()=>u,V1:()=>d,VN:()=>s,a2:()=>f,rV:()=>l,yl:()=>c});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,".Modal-module__modalwrapper--yCooO {\n    color: var(--c-modalcopy);\n    display: none;\n    align-items: center;\n    justify-content: center;\n    height: 100vh;\n    left: 0;\n    position: fixed;\n    top: 0;\n    width: 100%;\n    z-index: 3;\n}\n\n.Modal-module__modal--Js7Xp {\n    background: var(--c-modal);\n    box-shadow: inset 0 0 0 8px var(--c-modalcopy);\n    border: 1.5em solid var(--c-modal);\n    position: relative;\n    margin: 0 auto;\n    padding: 3em 2em;\n    width: 100%;\n}\n\n.Modal-module__modal--Js7Xp h2 {\n    background: var(--c-modal);\n    display: inline-block;\n    font-size: 16px;\n    left: 1em;\n    padding: 0 0.5em;\n    position: absolute;\n    top: -1em;\n}\n\n.Modal-module__small--Foo3u .Modal-module__modal--Js7Xp {\n    max-width: 500px;\n}\n\n.Modal-module__modal--Js7Xp {\n    height: 100%;\n}\n\n.Modal-module__modal--Js7Xp .Modal-module__close--WjoyV {\n    box-shadow: 0 0 0 0.4em var(--c-modal);\n    position: absolute;\n    right: -0.5em;\n    top: -0.5em;\n    z-index: 4;\n}\n\n.Modal-module__modalscroll--pcjs2 {\n    overflow: auto;\n    max-height: calc(100vh - 11em);\n}\n\n@media (min-width: 1280px) {\n    .Modal-module__modalwrapper--yCooO {\n        padding: 1em;\n    }\n    .Modal-module__modal--Js7Xp:not(.Modal-module__full--F1aoh) {\n        height: auto;\n    }\n}\n",""]);var l="Modal-module__modalwrapper--yCooO",c="Modal-module__modal--Js7Xp",u="Modal-module__small--Foo3u",s="Modal-module__close--WjoyV",d="Modal-module__modalscroll--pcjs2",f="Modal-module__full--F1aoh";const m=i},158(e,n,t){t.d(n,{Ay:()=>s,O6:()=>c,Pr:()=>l,VN:()=>u});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,".MontageToolbar-module__montagetoolbar--WRpWb {\n    bottom: 16.5em;\n    left: 0;\n    position: fixed;\n}\n\n.MontageToolbar-module__mainbutton--EZsfz {\n    border: none;\n    border-right: 2px solid var(--c-white);\n    border-top: 2px solid var(--c-white);\n}\n\n.MontageToolbar-module__close--jTrTP {\n    background: var(--c-black);\n    border: 2px solid var(--c-white);\n    color: var(--c-white);\n    position: absolute;\n    right: 0;\n    top: 0;\n}\n\n.MontageToolbar-module__close--jTrTP:hover {\n    background: var(--c-black);\n    border: 2px solid var(--c-white);\n    color: var(--c-white);\n}\n\n@media (min-width: 1280px) {\n    .MontageToolbar-module__montagetoolbar--WRpWb {\n        bottom: 5.7em;\n    }\n}\n",""]);var l="MontageToolbar-module__montagetoolbar--WRpWb",c="MontageToolbar-module__mainbutton--EZsfz",u="MontageToolbar-module__close--jTrTP";const s=i},294(e,n,t){t.d(n,{Ay:()=>f,O6:()=>c,P2:()=>l,Pf:()=>d,fp:()=>u,gB:()=>s});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,".PaletteSelector-module__dropdownContainer--Xl2bC {\n    display: grid;\n    gap: 0.4em;\n    grid-template-columns: auto auto;\n}\n\n.PaletteSelector-module__swatchContainer--O4Dl3 {\n    display: flex;\n    height: 1.4em;\n    margin: 0 auto 0.5em;\n    vertical-align: middle;\n    width: 5em;\n}\n\n.PaletteSelector-module__swatchContainer--O4Dl3:hover,\n.PaletteSelector-module__swatchContainer--O4Dl3:active {\n    border-color: color-mix(in srgb, var(--c-modalcopy) 40%, var(--c-white));\n}\n\n.PaletteSelector-module__swatchColorBlock--_G8v8 {\n    height: 100%;\n    width: 25%;\n}\n\n.PaletteSelector-module__radioInput--zcsqZ {\n    display: none;\n}\n\n.PaletteSelector-module__label--eged0 {\n    display: block;\n    margin: 4px;\n    cursor: pointer;\n    text-align: center;\n}\n\n@media (min-width: 700px) {\n    .PaletteSelector-module__dropdownContainer--Xl2bC {\n        display: grid;\n        grid-template-columns: auto auto auto auto;\n    }\n}\n\n@media (min-width: 900px) {\n    .PaletteSelector-module__dropdownContainer--Xl2bC {\n        display: grid;\n        grid-template-columns: auto auto auto auto auto;\n    }\n}\n\n@media (min-width: 1280px) {\n    .PaletteSelector-module__dropdownContainer--Xl2bC {\n        display: grid;\n        grid-template-columns: auto auto auto auto auto auto auto auto;\n    }\n}\n",""]);var l="PaletteSelector-module__dropdownContainer--Xl2bC",c="PaletteSelector-module__swatchContainer--O4Dl3",u="PaletteSelector-module__swatchColorBlock--_G8v8",s="PaletteSelector-module__radioInput--zcsqZ",d="PaletteSelector-module__label--eged0";const f=i},108(e,n,t){t.d(n,{A:()=>c,J:()=>l});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,".Photo-module__canvas--Owi0R {\n    margin: 0;\n    object-fit: contain;\n}\n",""]);var l="Photo-module__canvas--Owi0R";const c=i},656(e,n,t){t.d(n,{Ay:()=>s,KF:()=>u,Qd:()=>c,Te:()=>l});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,".PhotoTile-module__phototile--THCMI {\n    padding: 0 0 20px;\n    text-align: center;\n}\n\n.PhotoTile-module__canvasContainer--i97pt {\n    background: none;\n    border-style: solid;\n    border-width: 2px;\n    border-color: var(--c-canvasoutlinedark) var(--c-canvasoutlinelight) var(--c-canvasoutlinelight)\n        var(--c-canvasoutlinedark);\n    display: inline-block;\n    margin: 0 auto 10px;\n    position: relative;\n}\n\n.PhotoTile-module__deleted--PZdwd {\n    background: var(--c-red);\n    border: 2px solid var(--c-white);\n    color: var(--c-white);\n    padding: 0.2em;\n    position: absolute;\n    right: 0.4em;\n    top: 0.3em;\n}\n\n.PhotoTile-module__phototile--THCMI label {\n    margin-top: 0.5em;\n    font-size: 8px;\n}\n\n.PhotoTile-module__phototile--THCMI label span {\n    margin: 0;\n}\n",""]);var l="PhotoTile-module__phototile--THCMI",c="PhotoTile-module__canvasContainer--i97pt",u="PhotoTile-module__deleted--PZdwd";const s=i},275(e,n,t){t.d(n,{Ay:()=>s,Tm:()=>c,W0:()=>l,pR:()=>u});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,".SettingsMenu-module__settings--hiJiP label {\n    margin: 0 0 1em;\n}\n\n.SettingsMenu-module__settings--hiJiP select {\n    margin: 0.5em 0 0;\n}\n\n.SettingsMenu-module__qualityValue--ZfZTM {\n    display: inline-block;\n    margin: 1em;\n    text-align: right;\n    width: 3em;\n}\n\n.SettingsMenu-module__qualitySlider--VgbPX {\n    vertical-align: middle;\n    margin-left: 0;\n}\n",""]);var l="SettingsMenu-module__settings--hiJiP",c="SettingsMenu-module__qualityValue--ZfZTM",u="SettingsMenu-module__qualitySlider--VgbPX";const s=i},971(e,n,t){t.d(n,{Ay:()=>f,KE:()=>l,XJ:()=>d,jI:()=>c,oX:()=>u,wm:()=>s});var r=t(601),o=t.n(r),a=t(314),i=t.n(a)()(o());i.push([e.id,".ToolBar-module__toolbar--xnPbT {\n    bottom: 0;\n    box-sizing: border-box;\n    left: 0;\n    padding: 1em;\n    position: fixed;\n    width: 100%;\n    z-index: 2;\n}\n\n.ToolBar-module__toolbar--xnPbT:before,\n.ToolBar-module__toolbar--xnPbT:after {\n    opacity: 0.5;\n    content: '';\n    display: block;\n    height: 4px;\n    position: absolute;\n    left: 0;\n    right: 0;\n    margin: 0 auto;\n    width: 100%;\n}\n\n.ToolBar-module__toolbar--xnPbT:before {\n    background: var(--c-white);\n    top: 0;\n}\n\n.ToolBar-module__toolbar--xnPbT:after {\n    background: var(--c-black);\n    bottom: 0;\n}\n\n.ToolBar-module__toolbaritem--d0_Ol {\n    display: block;\n    margin: 0 0 0.5em;\n    width: 100%;\n}\n\n.ToolBar-module__settingsbutton--vzPEZ {\n    float: right;\n    margin: 0 10px;\n    width: auto;\n}\n\n.ToolBar-module__settingsbutton--vzPEZ button,\n.ToolBar-module__settingsbutton--vzPEZ button:hover {\n    background: none;\n    border: none;\n    color: inherit;\n    display: inline-block;\n    font-size: 40px;\n    height: 1em;\n    line-height: 1.1;\n    padding: 0;\n}\n\n.ToolBar-module__logo--QCJx0 {\n    float: left;\n    line-height: 2.5em;\n}\n\n.ToolBar-module__imageCount--vhhUG {\n    background: var(--c-gray);\n    border: 2px solid var(--c-white);\n    border-bottom: none;\n    border-right: none;\n    height: 2em;\n    right: 0;\n    color: var(--c-white);\n    padding: 0.5em;\n    position: absolute;\n    top: -2em;\n}\n\n@media (min-width: 1280px) {\n    .ToolBar-module__toolbar--xnPbT .ToolBar-module__toolbaritem--d0_Ol {\n        display: block;\n        float: left;\n        margin: 0 1em 0 0;\n        max-width: 340px;\n        width: auto;\n    }\n\n    .ToolBar-module__logo--QCJx0 {\n        font-size: 24px;\n        float: right;\n        margin-right: 1em;\n    }\n\n    .ToolBar-module__settingsbutton--vzPEZ {\n        margin-top: 0.5em;\n    }\n}\n",""]);var l="ToolBar-module__toolbar--xnPbT",c="ToolBar-module__toolbaritem--d0_Ol",u="ToolBar-module__settingsbutton--vzPEZ",s="ToolBar-module__logo--QCJx0",d="ToolBar-module__imageCount--vhhUG";const f=i},14(e,n,t){e.exports=t.p+"assets/fonts/dogicapixel.840048d54c9574e0054b.woff2"},399(e,n,t){e.exports=t.p+"assets/fonts/dogicapixelbold.31468c516cb0d254273a.woff2"},970(e,n,t){var r=t(540),o=t(338),a=t(433),i=t(72),l=t.n(i),c=t(825),u=t.n(c),s=t(659),d=t.n(s),f=t(56),m=t.n(f),p=t(159),h=t.n(p),b=t(113),v=t.n(b),g=t(171),y={};y.styleTagTransform=v(),y.setAttributes=m(),y.insert=d().bind(null,"head"),y.domAPI=u(),y.insertStyleElement=h(),l()(g.A,y),g.A&&g.A.locals&&g.A.locals;var x=t(848);const j=function(){return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(a.sv,{})})};var w=t(556),_=t(656),S={};S.styleTagTransform=v(),S.setAttributes=m(),S.insert=d().bind(null,"head"),S.domAPI=u(),S.insertStyleElement=h(),l()(_.Ay,S),_.Ay&&_.Ay.locals&&_.Ay.locals;var O=t(108),P={};P.styleTagTransform=v(),P.setAttributes=m(),P.insert=d().bind(null,"head"),P.domAPI=u(),P.insertStyleElement=h(),l()(O.A,P),O.A&&O.A.locals&&O.A.locals;var k=t(671);function T(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof l?r:l,u=Object.create(c.prototype);return A(u,"_invoke",function(t,r,o){var a,l,c,u=0,s=o||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,t){return a=n,l=0,c=e,f.n=t,i}};function m(t,r){for(l=t,c=r,n=0;!d&&u&&!o&&n<s.length;n++){var o,a=s[n],m=f.p,p=a[2];t>3?(o=p===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=t<2&&m<a[1])?(l=0,f.v=r,f.n=a[1]):m<p&&(o=t<3||a[0]>r||r>p)&&(a[4]=t,a[5]=r,f.n=p,l=0))}if(o||t>1)return i;throw d=!0,r}return function(o,s,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&m(s,p),l=s,c=p;(n=l<2?e:c)||!d;){a||(l?l<3?(l>1&&(f.n=-1),m(l,c)):f.n=c:f.v=c);try{if(u=2,a){if(l||(o="next"),n=a[o]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,l<2&&(l=0)}else 1===l&&(n=a.return)&&n.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((n=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(n){a=e,l=1,c=n}finally{u=1}}return{value:n,done:d}}}(t,o,a),!0),u}var i={};function l(){}function c(){}function u(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(A(n={},r,function(){return this}),n),d=u.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,A(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,A(d,"constructor",u),A(u,"constructor",c),c.displayName="GeneratorFunction",A(u,o,"GeneratorFunction"),A(d),A(d,o,"Generator"),A(d,r,function(){return this}),A(d,"toString",function(){return"[object Generator]"}),(T=function(){return{w:a,m:f}})()}function A(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}A=function(e,n,t,r){function a(n,t){A(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},A(e,n,t,r)}function C(e,n,t,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(r,o)}function E(e){return F.apply(this,arguments)}function F(){var e;return e=T().m(function e(n){var t,r,o,a,i,l,c,u,s,d,f;return T().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,createImageBitmap(new Blob([n]));case 1:for(t=e.v,r=t.width,o=t.height,a=new OffscreenCanvas(r,o),(i=a.getContext("2d")).drawImage(t,0,0),l=i.getImageData(0,0,r,o),c=l.data,u=new Uint8Array(r*o),s=0;s<c.length;s+=4)d=c[s],f=c[s+3],u[s/4]=f<128?4:d>=200?0:d>=120?1:d>=40?2:3;return e.a(2,{width:r,height:o,data:u})}},e)}),F=function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){C(a,r,o,i,l,"next",e)}function l(e){C(a,r,o,i,l,"throw",e)}i(void 0)})},F.apply(this,arguments)}function M(e,n,t,r,o){var a=o||{},i=a.top,l=void 0===i?n?16:0:i,c=a.bottom,u=void 0===c?n?16:0:c,s=a.left,d=void 0===s?n?16:0:s,f=a.right,m=t+d+(void 0===f?n?16:0:f),p=r+l+u,h=new OffscreenCanvas(m,p),b=h.getContext("2d");return b.imageSmoothingEnabled=!1,b.drawImage(e,d,l,t,r),n&&b.drawImage(n,0,0,m,p),h}var I=function(e){return e?e.name.includes("wild")?{top:40,bottom:72,left:16,right:16}:{top:16,bottom:16,left:16,right:16}:{top:0,bottom:0,left:0,right:0}};function D(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof l?r:l,u=Object.create(c.prototype);return N(u,"_invoke",function(t,r,o){var a,l,c,u=0,s=o||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,t){return a=n,l=0,c=e,f.n=t,i}};function m(t,r){for(l=t,c=r,n=0;!d&&u&&!o&&n<s.length;n++){var o,a=s[n],m=f.p,p=a[2];t>3?(o=p===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=t<2&&m<a[1])?(l=0,f.v=r,f.n=a[1]):m<p&&(o=t<3||a[0]>r||r>p)&&(a[4]=t,a[5]=r,f.n=p,l=0))}if(o||t>1)return i;throw d=!0,r}return function(o,s,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&m(s,p),l=s,c=p;(n=l<2?e:c)||!d;){a||(l?l<3?(l>1&&(f.n=-1),m(l,c)):f.n=c:f.v=c);try{if(u=2,a){if(l||(o="next"),n=a[o]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,l<2&&(l=0)}else 1===l&&(n=a.return)&&n.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((n=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(n){a=e,l=1,c=n}finally{u=1}}return{value:n,done:d}}}(t,o,a),!0),u}var i={};function l(){}function c(){}function u(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(N(n={},r,function(){return this}),n),d=u.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,N(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,N(d,"constructor",u),N(u,"constructor",c),c.displayName="GeneratorFunction",N(u,o,"GeneratorFunction"),N(d),N(d,o,"Generator"),N(d,r,function(){return this}),N(d,"toString",function(){return"[object Generator]"}),(D=function(){return{w:a,m:f}})()}function N(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}N=function(e,n,t,r){function a(n,t){N(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},N(e,n,t,r)}function B(e,n,t,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(r,o)}var R=function(e){var n=e.image,t=e.imageG,o=e.imageB,a=e.paletteId,i=e.frame,l=e.isFramePadding,c=void 0!==l&&l,u=e.paletteOrder,s=e.scaleFactor,d=void 0===s?.3:s,f=e.rgbConfig,m=void 0===f?{}:f,p=e.saveRef,h=e.drawHandlers,b=void 0===h?{}:h,v=e.imageSmoothing,g=void 0!==v&&v,y=m.brightness,j=void 0===y?0:y,w=m.contrast,_=void 0===w?0:w,S=b.onDrawStart,P=b.onDrawMove,T=b.onDrawEnd,A=function(e,n,t,o,a,i,l,c,u,s){var d=arguments.length>10&&void 0!==arguments[10]&&arguments[10],f=(0,r.useRef)(null),m=(0,r.useRef)(null),p=s||m,h=k.BG[o];return(0,r.useEffect)(function(){var r;e&&(r=D().m(function r(){var o,s,m,b,v,g,y,x,j,w,_,S,O,P,T,A,C,E;return D().w(function(r){for(;;)switch(r.p=r.n){case 0:return r.p=0,o=e.width,s=e.height,m=e.photoData,b=n&&t?(0,k.Qk)(m,n.photoData,t.photoData,o,s,c,u):(0,k.GX)(m,h,l),r.n=1,createImageBitmap(new ImageData(b,o,s));case 1:if(v=r.v,g=null,!a){r.n=3;break}for(y=new Uint8Array(a.data.length),x=0;x<a.data.length;x++)y[x]=4===a.data[x]?0:a.data[x];for(j=(0,k.GX)(y,h,l),w=0;w<a.data.length;w++)4===a.data[w]&&(j[4*w+3]=0);return r.n=2,createImageBitmap(new ImageData(j,a.width,a.height));case 2:g=r.v;case 3:_=I(a),S=M(v,g,o,s,_),O=new OffscreenCanvas(10*S.width,10*S.height),(P=O.getContext("2d")).imageSmoothingEnabled=d,P.drawImage(S,0,0,O.width,O.height),p.current=O,(T=f.current)&&(A=T.getContext("2d"),C=2*i,T.width=S.width*C,T.height=S.height*C,A.imageSmoothingEnabled=d,A.drawImage(S,0,0,T.width,T.height)),r.n=5;break;case 4:r.p=4,E=r.v,console.log(E);case 5:return r.a(2)}},r,null,[[0,4]])}),function(){var e=this,n=arguments;return new Promise(function(t,o){var a=r.apply(e,n);function i(e){B(a,t,o,i,l,"next",e)}function l(e){B(a,t,o,i,l,"throw",e)}i(void 0)})})()},[e,h,a,i,10,l,n,t,c,u,d]),{displayCanvasRef:f,saveCanvasRef:p}}(n,t,o,a,i,d,u,j,_,p,g).displayCanvasRef,C=(0,r.useMemo)(function(){var e=!!i,n=e&&i.name.includes("wild"),t=e?160:128,r=e?n?224:144:112,o=e||!c?"0":"".concat(16*d,"px");return{canvasWidth:t*d,canvasHeight:r*d,canvasPadding:o}},[i,c,d]),E=C.canvasWidth,F=C.canvasHeight,N=C.canvasPadding;return n?(0,x.jsx)("canvas",{className:O.J,width:E,height:F,style:{padding:N,width:"".concat(E,"px"),height:"".concat(F,"px")},ref:A,onMouseDown:S,onMouseMove:P,onMouseUp:T,onMouseLeave:T,onTouchStart:S,onTouchMove:P,onTouchEnd:T}):null};R.propTypes={image:w.object.isRequired,imageG:w.object,imageB:w.object,paletteId:w.string,frame:w.shape({name:w.string}),isFramePadding:w.bool,paletteOrder:w.string,scaleFactor:w.number,rgbConfig:w.shape({brightness:w.number,contrast:w.number}),saveRef:w.object,drawHandlers:w.shape({onDrawStart:w.func,onDrawMove:w.func,onDrawEnd:w.func}),imageSmoothing:w.bool};const G=(0,r.memo)(R);function L(e){var n=e.image,t=e.paletteId,r=e.frame,o=e.isFramePadding,a=e.scaleFactor,i=e.showDeletedFlag,l=e.onClick,c=e.onSelect,u=e.isSelected,s=e.isDisabled,d=e.rgbConfig;if(!n)return null;var f=(0,x.jsxs)(x.Fragment,{children:[n.isDeleted&&i?(0,x.jsx)("div",{className:_.KF,children:"d"}):null,(0,x.jsx)(G,{image:n,paletteId:t,scaleFactor:a,frame:r,isFramePadding:o,rgbConfig:d})]});return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:_.Te,children:[l?(0,x.jsx)("button",{className:_.Qd,onClick:l,children:f}):(0,x.jsx)("div",{className:_.Qd,children:f}),(0,x.jsxs)("label",{className:"pixel-checkbox",children:[(0,x.jsx)("input",{type:"checkbox",checked:u,onChange:function(e){return c(null==n?void 0:n.index,e.target.checked)},disabled:s}),(0,x.jsx)("span",{})]})]})})}L.propTypes={image:w.object,paletteId:w.string,frame:w.object,isFramePadding:w.bool,scaleFactor:w.number,showDeletedFlag:w.bool,onClick:w.func,onSelect:w.func,isSelected:w.bool,isDisabled:w.bool,rgbConfig:w.shape({brightness:w.number,contrast:w.number})};const z=L;var q=t(294),U={};U.styleTagTransform=v(),U.setAttributes=m(),U.insert=d().bind(null,"head"),U.domAPI=u(),U.insertStyleElement=h(),l()(q.Ay,U),q.Ay&&q.Ay.locals&&q.Ay.locals;var J=t(197),X={};X.styleTagTransform=v(),X.setAttributes=m(),X.insert=d().bind(null,"head"),X.domAPI=u(),X.insertStyleElement=h(),l()(J.Ay,X),J.Ay&&J.Ay.locals&&J.Ay.locals;var Q=function(e){var n=e.isOpen,t=e.setIsOpen,o=e.title,a=e.children,i=e.type;return(0,r.useEffect)(function(){return n?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),function(){document.body.classList.remove("modal-open")}},[n]),(0,x.jsx)("div",{className:"".concat(J.rV," ").concat("small"===i?J.EX:""," ").concat("full"===i?J.a2:""),onClick:function(){return t(!1)},style:{display:n?"flex":"none"},children:(0,x.jsxs)("div",{className:J.yl,onClick:function(e){return e.stopPropagation()},children:[(0,x.jsx)("button",{className:"closeButton ".concat(J.VN),onClick:function(){return t(!n)},children:"x"}),(0,x.jsx)("h2",{children:o}),(0,x.jsx)("div",{className:J.V1,children:a})]})})};Q.propTypes={isOpen:w.bool.isRequired,setIsOpen:w.func.isRequired,title:w.string.isRequired,children:w.node,type:w.string};const W=Q;function H(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var V=function(e){var n,t,o=e.selectedPalette,a=e.onPaletteChange,i=(n=(0,r.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(n)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(n,t)||function(e,n){if(e){if("string"==typeof e)return H(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?H(e,n):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1];return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{children:[(0,x.jsx)("button",{onClick:function(){return c(!l)},className:"button",children:"Palette: ".concat(o)}),(0,x.jsx)(W,{isOpen:l,setIsOpen:c,title:"Palettes",allowScroll:!0,zindex:8,children:(0,x.jsx)("div",{className:q.P2,children:Object.keys(k.BG).map(function(e){var n=k.BG[e].colors,t=o===e;return(0,x.jsxs)("label",{className:q.Pf,children:[(0,x.jsx)("input",{type:"radio",name:"palette",value:e,checked:t,onChange:function(e){return function(e){a(e),c(!1)}(e.target.value)},className:q.gB}),(0,x.jsx)("span",{className:q.O6,style:t?{borderColor:"color-mix(in srgb, var(--c-modalcopy) 20%, #fff)"}:null,children:n.map(function(e,n){return(0,x.jsx)("span",{className:q.fp,style:{backgroundColor:"rgb(".concat(e.r,",").concat(e.g,",").concat(e.b,")")}},n)})}),e]},e)})})})]})})};V.propTypes={selectedPalette:w.string.isRequired,onPaletteChange:w.func.isRequired};const Z=V;var K=t(963),$={};$.styleTagTransform=v(),$.setAttributes=m(),$.insert=d().bind(null,"head"),$.domAPI=u(),$.insertStyleElement=h(),l()(K.Ay,$),K.Ay&&K.Ay.locals&&K.Ay.locals;var Y=(0,r.forwardRef)(function(e,n){var t=e.text,o=e.onChange,a=e.onRemove,i=e.showRemove,l=e.accept,c=new FileReader,u=(0,r.useRef)(null),s=n||u;return(0,x.jsxs)("div",{className:K.Q5,children:[(0,x.jsx)("input",{ref:s,type:"file",id:"images",accept:l,multiple:!0,onChange:function(e){var n=e.target.files[0];n&&(c.onload=function(){o({data:c.result,name:n.name})},c.readAsArrayBuffer(n))}}),(0,x.jsx)("button",{className:"button",onClick:function(){s.current&&s.current.click()},children:t}),(0,x.jsx)("button",{className:"closeButton ".concat(K.TF),onClick:function(){a&&a(),s.current&&(s.current.value=null)},style:{display:i?"block":"none"},children:"x"})]})});const ee=Y;function ne(e){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):null}catch(n){return console.error("Error getting item ".concat(e," from localStorage"),n),null}}function te(e,n){try{window.localStorage.setItem(e,JSON.stringify(n))}catch(n){console.error("Error setting item ".concat(e," in localStorage"),n)}}function re(e){try{window.localStorage.setItem("tricklens-frame-data",JSON.stringify(e,function(e,n){return n instanceof Uint8Array?Array.from(n):n}))}catch(e){console.warn("Failed to save frame to localStorage",e)}}Y.displayName="FileLoader",Y.propTypes={text:w.string.isRequired,onChange:w.func.isRequired,onRemove:w.func,showRemove:w.bool,accept:w.string},Y.defaultProps={onRemove:null,showRemove:!1,accept:""};var oe=t(971),ae={};function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function le(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof l?r:l,u=Object.create(c.prototype);return ce(u,"_invoke",function(t,r,o){var a,l,c,u=0,s=o||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,t){return a=n,l=0,c=e,f.n=t,i}};function m(t,r){for(l=t,c=r,n=0;!d&&u&&!o&&n<s.length;n++){var o,a=s[n],m=f.p,p=a[2];t>3?(o=p===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=t<2&&m<a[1])?(l=0,f.v=r,f.n=a[1]):m<p&&(o=t<3||a[0]>r||r>p)&&(a[4]=t,a[5]=r,f.n=p,l=0))}if(o||t>1)return i;throw d=!0,r}return function(o,s,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&m(s,p),l=s,c=p;(n=l<2?e:c)||!d;){a||(l?l<3?(l>1&&(f.n=-1),m(l,c)):f.n=c:f.v=c);try{if(u=2,a){if(l||(o="next"),n=a[o]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,l<2&&(l=0)}else 1===l&&(n=a.return)&&n.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((n=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(n){a=e,l=1,c=n}finally{u=1}}return{value:n,done:d}}}(t,o,a),!0),u}var i={};function l(){}function c(){}function u(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(ce(n={},r,function(){return this}),n),d=u.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,ce(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,ce(d,"constructor",u),ce(u,"constructor",c),c.displayName="GeneratorFunction",ce(u,o,"GeneratorFunction"),ce(d),ce(d,o,"Generator"),ce(d,r,function(){return this}),ce(d,"toString",function(){return"[object Generator]"}),(le=function(){return{w:a,m:f}})()}function ce(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ce=function(e,n,t,r){function a(n,t){ce(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},ce(e,n,t,r)}function ue(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ue(Object(t),!0).forEach(function(n){de(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ue(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function de(e,n,t){return(n=function(e){var n=function(e){if("object"!=ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=ie(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ie(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function fe(e,n,t,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(r,o)}ae.styleTagTransform=v(),ae.setAttributes=m(),ae.insert=d().bind(null,"head"),ae.domAPI=u(),ae.insertStyleElement=h(),l()(oe.Ay,ae),oe.Ay&&oe.Ay.locals&&oe.Ay.locals;var me=(0,r.forwardRef)(function(e,n){var t=e.palette,r=e.setPalette,o=e.setSaveData,a=e.setFrame,i=e.setIsSettingsOpen,l=e.isSettingsOpen,c=e.saveData,u=e.frame,s=e.color,d=e.count,f=function(){var e,n=(e=le().m(function e(n){var t,r,o,i;return le().w(function(e){for(;;)switch(e.n){case 0:return t=n.data,r=n.name,e.n=1,E(t);case 1:o=e.v,i=se(se({},o),{},{name:r}),a(i),re(i);case 2:return e.a(2)}},e)}),function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){fe(a,r,o,i,l,"next",e)}function l(e){fe(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}();return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"".concat(oe.KE," color").concat(s),children:[d>0?(0,x.jsx)("div",{className:oe.XJ,children:d}):null,(0,x.jsx)("div",{className:oe.jI,children:(0,x.jsx)(ee,{text:"Select .sav …",onChange:function(e){var n=e.data,t=(0,k.n1)(n);o(t);try{localStorage.setItem("tricklens-save-data",JSON.stringify(t,function(e,n){return n instanceof Uint8Array?Array.from(n):n}))}catch(e){console.warn("Failed to save to localStorage",e)}window.scrollTo(0,0)},onRemove:function(){o(null),localStorage.removeItem("tricklens-save-data")},showRemove:!!c,accept:".sav",ref:n})}),(0,x.jsx)("div",{className:oe.jI,children:(0,x.jsx)(ee,{text:"Select frame …",onChange:f,onRemove:function(){a(null),window.localStorage.removeItem("tricklens-frame-data")},showRemove:!!u,accept:".png"})}),(0,x.jsx)("div",{className:oe.jI,children:(0,x.jsx)(Z,{selectedPalette:t,onPaletteChange:r})}),(0,x.jsx)("div",{className:oe.oX,children:(0,x.jsx)("button",{className:"imgButton",onClick:function(){return i(!l)},children:"⛭"})}),(0,x.jsx)("span",{className:"".concat(oe.wm," fontBold"),children:"TrickLens Studio"})]})})});const pe=me;function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function be(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ve(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?be(Object(t),!0).forEach(function(n){ge(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ge(e,n,t){return(n=function(e){var n=function(e){if("object"!=he(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=he(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ye(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}me.displayName="ToolBar",me.propTypes={palette:w.string.isRequired,setPalette:w.func.isRequired,setSaveData:w.func.isRequired,setFrame:w.func.isRequired,setIsSettingsOpen:w.func.isRequired,isSettingsOpen:w.bool.isRequired,saveData:w.object,frame:w.object,color:w.string.isRequired,count:w.number.isRequired};var xe=(0,r.createContext)(),je=function(){return(0,r.useContext)(xe)},we=function(e){var n,t,o=e.children,a=(n=(0,r.useState)(function(){var e=ne("isReversed");return{scaleFactor:ne("scaleFactor")||2,isShowDeleted:ne("isShowDeleted")||!1,color:ne("color")||"green",isReversed:null===e||e,exportFormat:ne("exportFormat")||"png",exportQuality:Number(ne("exportQuality"))||.9,theme:ne("theme")||"system"}}),t=2,function(e){if(Array.isArray(e))return e}(n)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(n,t)||function(e,n){if(e){if("string"==typeof e)return ye(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ye(e,n):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],l=a[1];(0,r.useEffect)(function(){Object.keys(i).forEach(function(e){te(e,i[e])})},[i]),(0,r.useEffect)(function(){var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var n=i.theme;"system"===n&&(n=e.matches?"dark":"light"),document.body.setAttribute("data-theme",n)};return n(),e.addEventListener("change",n),function(){return e.removeEventListener("change",n)}},[i.theme]),(0,r.useEffect)(function(){var e=function(e){var n=e.ctrlKey||e.metaKey;"+"!==e.key&&"="!==e.key||!n?"-"===e.key&&n&&(e.preventDefault(),c("scaleFactor",Math.max(i.scaleFactor-1,1))):(e.preventDefault(),c("scaleFactor",Math.min(i.scaleFactor+1,4)))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[i.scaleFactor]);var c=function(e,n){l(function(t){return ve(ve({},t),{},ge({},e,n))})};return(0,x.jsx)(xe.Provider,{value:{settings:i,handleSettingChange:function(e){var n=e.target,t=n.name,r=n.value,o=n.type,a=n.checked,i="checkbox"===o?a:"scaleFactor"===t||"exportQuality"===t?Number(r):r;c(t,i)},updateSetting:c},children:o})};we.propTypes={children:w.node.isRequired};var _e=t(275),Se={};Se.styleTagTransform=v(),Se.setAttributes=m(),Se.insert=d().bind(null,"head"),Se.domAPI=u(),Se.insertStyleElement=h(),l()(_e.Ay,Se),_e.Ay&&_e.Ay.locals&&_e.Ay.locals;const Oe=function(){var e=je(),n=e.settings,t=e.handleSettingChange;return(0,x.jsxs)("div",{className:_e.W0,children:[(0,x.jsxs)("label",{children:["Photo scale:"," ",(0,x.jsxs)("select",{className:"select",name:"scaleFactor",value:n.scaleFactor,onChange:t,children:[(0,x.jsx)("option",{value:1,children:"1"}),(0,x.jsx)("option",{value:2,children:"2"}),(0,x.jsx)("option",{value:3,children:"3"}),(0,x.jsx)("option",{value:4,children:"4"})]})]}),(0,x.jsxs)("label",{children:["UI color:"," ",(0,x.jsxs)("select",{className:"select",name:"color",value:n.color,onChange:t,children:[(0,x.jsx)("option",{children:"red"}),(0,x.jsx)("option",{children:"green"}),(0,x.jsx)("option",{children:"yellow"}),(0,x.jsx)("option",{children:"blue"})]})]}),(0,x.jsxs)("label",{children:["Theme:"," ",(0,x.jsxs)("select",{className:"select",name:"theme",value:n.theme,onChange:t,children:[(0,x.jsx)("option",{value:"system",children:"System"}),(0,x.jsx)("option",{value:"light",children:"Light"}),(0,x.jsx)("option",{value:"dark",children:"Dark"})]})]}),(0,x.jsxs)("label",{children:["Export format:"," ",(0,x.jsxs)("select",{className:"select",name:"exportFormat",value:n.exportFormat,onChange:t,children:[(0,x.jsx)("option",{value:"png",children:"PNG"}),(0,x.jsx)("option",{value:"jpg",children:"JPG"})]})]}),"jpg"===n.exportFormat?(0,x.jsxs)("label",{children:["Quality:"," ",(0,x.jsxs)("span",{className:_e.Tm,children:[Math.round(100*n.exportQuality),"%"]}),(0,x.jsx)("input",{className:_e.pR,type:"range",name:"exportQuality",min:"0.1",max:"1",step:"0.1",value:n.exportQuality,onChange:t})]}):null,(0,x.jsxs)("label",{className:"pixel-checkbox",children:[(0,x.jsx)("input",{type:"checkbox",name:"isReversed",checked:n.isReversed,onChange:t}),(0,x.jsx)("span",{}),"Reverse order"]}),(0,x.jsxs)("label",{className:"pixel-checkbox",children:[(0,x.jsx)("input",{type:"checkbox",name:"isShowDeleted",checked:n.isShowDeleted,onChange:t}),(0,x.jsx)("span",{}),"Show deleted"]})]})};var Pe=t(713),ke={};function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Ce(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ae(Object(t),!0).forEach(function(n){Ee(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ee(e,n,t){return(n=function(e){var n=function(e){if("object"!=Te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=Te(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Te(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Fe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,n)||Me(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,n){if(e){if("string"==typeof e)return Ie(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ie(e,n):void 0}}function Ie(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Be(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ne(Object(t),!0).forEach(function(n){Re(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ne(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Re(e,n,t){return(n=function(e){var n=function(e){if("object"!=De(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=De(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==De(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ge(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof l?r:l,u=Object.create(c.prototype);return Le(u,"_invoke",function(t,r,o){var a,l,c,u=0,s=o||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,t){return a=n,l=0,c=e,f.n=t,i}};function m(t,r){for(l=t,c=r,n=0;!d&&u&&!o&&n<s.length;n++){var o,a=s[n],m=f.p,p=a[2];t>3?(o=p===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=t<2&&m<a[1])?(l=0,f.v=r,f.n=a[1]):m<p&&(o=t<3||a[0]>r||r>p)&&(a[4]=t,a[5]=r,f.n=p,l=0))}if(o||t>1)return i;throw d=!0,r}return function(o,s,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&m(s,p),l=s,c=p;(n=l<2?e:c)||!d;){a||(l?l<3?(l>1&&(f.n=-1),m(l,c)):f.n=c:f.v=c);try{if(u=2,a){if(l||(o="next"),n=a[o]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,l<2&&(l=0)}else 1===l&&(n=a.return)&&n.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((n=(d=f.n<0)?c:t.call(r,f))!==i)break}catch(n){a=e,l=1,c=n}finally{u=1}}return{value:n,done:d}}}(t,o,a),!0),u}var i={};function l(){}function c(){}function u(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Le(n={},r,function(){return this}),n),d=u.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Le(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,Le(d,"constructor",u),Le(u,"constructor",c),c.displayName="GeneratorFunction",Le(u,o,"GeneratorFunction"),Le(d),Le(d,o,"Generator"),Le(d,r,function(){return this}),Le(d,"toString",function(){return"[object Generator]"}),(Ge=function(){return{w:a,m:f}})()}function Le(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Le=function(e,n,t,r){function a(n,t){Le(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},Le(e,n,t,r)}function ze(e,n,t,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(r,o)}function qe(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){ze(a,r,o,i,l,"next",e)}function l(e){ze(a,r,o,i,l,"throw",e)}i(void 0)})}}ke.styleTagTransform=v(),ke.setAttributes=m(),ke.insert=d().bind(null,"head"),ke.domAPI=u(),ke.insertStyleElement=h(),l()(Pe.Ay,ke),Pe.Ay&&Pe.Ay.locals&&Pe.Ay.locals;var Ue=function(e){return e?"-"+e.toLowerCase().replace(/\s/g,"-"):""};function Je(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return Xe(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Xe(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var Qe=function(e){var n=e.editImages,t=e.palette,o=e.frame,a=e.username,i=je().settings,l=Je((0,r.useState)("none"),2),c=l[0],u=l[1],s=Je((0,r.useState)(0),2),d=s[0],f=s[1],m=Je((0,r.useState)(1),2),p=m[0],h=m[1],b=Je((0,r.useState)("none"),2),v=b[0],g=b[1],y=Je((0,r.useState)("normal"),2),j=y[0],w=y[1],_=Je((0,r.useState)(0),2),S=_[0],O=_[1],P=Je((0,r.useState)(0),2),T=P[0],A=P[1];(0,r.useEffect)(function(){O(0),A(0)},[n]);var C=function(e,n,t,o){var a=Fe((0,r.useState)(e),2),i=a[0],l=a[1],c=Fe((0,r.useState)(!1),2),u=c[0],s=c[1],d=(0,r.useCallback)(function(e){var r,a=e.currentTarget;if(a&&i){for(var c=a.getBoundingClientRect(),u=a.width/c.width,s=a.height/c.height,d=function(e){return e.touches&&e.touches.length>0?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}(e),f=d.x,m=d.y,p=(f-c.left)*u,h=(m-c.top)*s,b=I(n),v=Math.floor(p/8-b.left),g=Math.floor(h/8-b.top),y=function(e){if(Array.isArray(e))return Ie(e)}(r=i.photoData)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||Me(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),x=Number(o),j=0;j<x;j++)for(var w=0;w<x;w++){var _=v+j,S=g+w;_>=0&&_<128&&S>=0&&S<112&&(y[128*S+_]=Number(t))}l(Ce(Ce({},i),{},{photoData:y}))}},[i,n,o,t]),f=(0,r.useCallback)(function(e){e.cancelable&&e.preventDefault(),s(!0),d(e)},[d]),m=(0,r.useCallback)(function(e){e.cancelable&&e.preventDefault(),u&&d(e)},[u,d]),p=(0,r.useCallback)(function(e){e.cancelable&&e.preventDefault(),s(!1)},[]);return{editedImage:i,setEditedImage:l,drawHandlers:{onDrawStart:f,onDrawMove:m,onDrawEnd:p,onMouseLeave:p}}}(n?n[0]:null,o,d,p),E=C.editedImage,F=C.setEditedImage,M=C.drawHandlers,D="rgb"===v;!function(e,n,t,o,a){(0,r.useEffect)(function(){if(e){var r=(null==e?void 0:e.length)>1&&"none"!==o;if(n&&t&&"none"!==t||r){var i=r?(0,k.ah)(e.map(function(e){return e.photoData}),o):e[0].photoData;i=(0,k.Cf)(i,t),a(Be(Be({},e[0]),{},{photoData:i}))}"none"!==t||r||a(e[0])}},[t,e,o,a])}(n||null,E,c,D?"none":v,F);var N=(0,r.useRef)(null),B=function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"png",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.9,i=function(){var e="jpg"===o;return{mimeType:e?"image/jpeg":"image/png",extension:e?"jpg":"png"}};return{handleExport:(0,r.useCallback)(qe(Ge().m(function r(){var o,l,c,u,s,d;return Ge().w(function(r){for(;;)switch(r.n){case 0:if(o=e.current){r.n=1;break}return console.error("Save canvas not ready for export."),r.a(2);case 1:return l=i(),c=l.mimeType,u=l.extension,r.n=2,o.convertToBlob({type:c,quality:a});case 2:s=r.v,(d=document.createElement("a")).download="gbcam".concat(Ue(n),"-").concat(t,"-").concat(Date.now(),".").concat(u),d.href=URL.createObjectURL(s),d.click(),URL.revokeObjectURL(d.href);case 3:return r.a(2)}},r)})),[e,n,t,o,a]),handleShare:(0,r.useCallback)(qe(Ge().m(function r(){var o,l,c,u,s,d,f,m;return Ge().w(function(r){for(;;)switch(r.p=r.n){case 0:if(o=e.current){r.n=1;break}return r.a(2);case 1:return r.p=1,l=i(),c=l.mimeType,u=l.extension,r.n=2,o.convertToBlob({type:c,quality:a});case 2:if(s=r.v,d="gbcam".concat(Ue(n),"-").concat(t,"-").concat(Date.now(),".").concat(u),f=new File([s],d,{type:c}),!navigator.canShare||!navigator.canShare({files:[f]})){r.n=3;break}return r.n=3,navigator.share({files:[f]});case 3:r.n=5;break;case 4:r.p=4,m=r.v,console.error("Error sharing:",m);case 5:return r.a(2)}},r,null,[[1,4]])})),[e,n,t,o,a])}}(N,a,t,i.exportFormat,i.exportQuality),R=B.handleExport,L=B.handleShare,z=function(e){if(!e||e<=0)return[];var n=["none","vertical","horizontal","quadrant","horizontal-2/3","border"];return e>2&&n.push("horizontal-bars"),e>3&&n.push("four-quadrant"),n}(null==n?void 0:n.length).map(function(e){return(0,x.jsx)("option",{value:e,children:e},e)}),q=(0,r.useMemo)(function(){return"undefined"!=typeof navigator&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document)},[]);return(0,x.jsxs)("div",{className:Pe.sH,children:[(0,x.jsx)("div",{className:Pe.jW,children:(0,x.jsxs)("div",{className:Pe.hs,children:[(0,x.jsx)(G,{image:E,imageG:D&&(null==n?void 0:n.length)>=1?n[1]:void 0,imageB:D&&(null==n?void 0:n.length)>=2?n[2]:void 0,paletteId:t,frame:o,scaleFactor:4,isScale:!0,drawHandlers:M,paletteOrder:j,exportConfig:{format:i.exportFormat,quality:i.exportQuality,username:a},showShareButton:!0,showExportButton:!0,saveRef:N,rgbConfig:{brightness:S,contrast:T}}),(0,x.jsxs)("div",{children:[R&&!q?(0,x.jsxs)("button",{className:"button",onClick:R,children:["Export",(0,x.jsxs)("span",{children:[" as ",i.exportFormat.toUpperCase()]})]}):null,L&&q&&"undefined"!=typeof navigator&&navigator.share?(0,x.jsx)("button",{className:"button",onClick:L,children:"Share"}):null]})]})}),(0,x.jsxs)("div",{className:Pe.ne,children:[(0,x.jsxs)("label",{children:["Trick Lenses:",(0,x.jsxs)("select",{className:Pe.Lt,value:c,onChange:function(e){return u(e.target.value)},children:[(0,x.jsx)("option",{value:"none",children:"none"}),(0,x.jsx)("option",{value:"mirror-rtl",children:"mirror-rtl"}),(0,x.jsx)("option",{value:"mirror-ltr",children:"mirror-ltr"}),(0,x.jsx)("option",{value:"mirror-btt",children:"mirror-btt"}),(0,x.jsx)("option",{value:"mirror-ttb",children:"mirror-ttb"}),(0,x.jsx)("option",{value:"zoom",children:"zoom"}),(0,x.jsx)("option",{value:"zoom-h",children:"zoom-h"}),(0,x.jsx)("option",{value:"zoom-v",children:"zoom-v"}),(0,x.jsx)("option",{value:"tile",children:"tile"})]})]}),(0,x.jsxs)("label",{children:["Palette Order:",(0,x.jsxs)("select",{className:Pe.Lt,value:j,onChange:function(e){return w(e.target.value)},children:[(0,x.jsx)("option",{value:"normal",children:"normal"}),(0,x.jsx)("option",{value:"i",children:"invert"}),(0,x.jsx)("option",{value:"pa",children:"a"}),(0,x.jsx)("option",{value:"pb",children:"b"}),(0,x.jsx)("option",{value:"pc",children:"c"}),(0,x.jsx)("option",{value:"pd",children:"d"})]})]}),(0,x.jsxs)("label",{children:["Color:",(0,x.jsxs)("select",{className:Pe.Lt,value:d,onChange:function(e){return f(e.target.value)},children:[(0,x.jsx)("option",{value:"0",children:"Lightest"}),(0,x.jsx)("option",{value:"1",children:"Light"}),(0,x.jsx)("option",{value:"2",children:"Dark"}),(0,x.jsx)("option",{value:"3",children:"Darkest"})]})]}),(0,x.jsxs)("label",{children:["Brush Size:",(0,x.jsxs)("select",{className:Pe.Lt,value:p,onChange:function(e){return h(e.target.value)},children:[(0,x.jsx)("option",{value:"1",children:"1"}),(0,x.jsx)("option",{value:"2",children:"2"}),(0,x.jsx)("option",{value:"3",children:"3"}),(0,x.jsx)("option",{value:"4",children:"4"}),(0,x.jsx)("option",{value:"5",children:"5"}),(0,x.jsx)("option",{value:"6",children:"6"})]})]}),(null==n?void 0:n.length)>1?(0,x.jsxs)("label",{children:["Montage:",(0,x.jsxs)("select",{className:Pe.Lt,value:v,onChange:function(e){return g(e.target.value)},children:[z,n.length>2?(0,x.jsx)("option",{value:"rgb",children:"rgb"}):null]})]}):null,(null==n?void 0:n.length)>2&&D?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("label",{children:["Brightness: ",Math.round(20*S),(0,x.jsx)("input",{className:Pe.aw,type:"range",min:"-0.5",max:"0.5",step:"0.05",value:S,onChange:function(e){return O(e.target.value)}})]}),(0,x.jsxs)("label",{children:["Contrast: ",Math.round(10*T),(0,x.jsx)("input",{className:Pe.aw,type:"range",min:"-1",max:"1",step:"0.1",value:T,onChange:function(e){return A(e.target.value)}})]})]}):null]})]})};const We=Qe;Qe.propTypes={editImages:w.object,palette:w.string,frame:w.object,username:w.string};var He=t(158),Ve={};Ve.styleTagTransform=v(),Ve.setAttributes=m(),Ve.insert=d().bind(null,"head"),Ve.domAPI=u(),Ve.insertStyleElement=h(),l()(He.Ay,Ve),He.Ay&&He.Ay.locals&&He.Ay.locals;var Ze=function(e){var n=e.montagePhotos,t=e.palette,r=e.onClick,o=e.onClose;return 0===n.length?null:(0,x.jsxs)("div",{className:He.Pr,children:[(0,x.jsx)("button",{className:He.O6,onClick:r,children:n.map(function(e,n){return(0,x.jsx)(G,{paletteId:t,image:e,frame:null,scaleFactor:.4,imageSmoothing:!0},n)})}),(0,x.jsx)("button",{className:"closeButton ".concat(He.VN),onClick:o,children:"x"})]})};Ze.propTypes={montagePhotos:w.array.isRequired,palette:w.string,onClick:w.func,onClose:w.func};const Ke=Ze;function $e(e){return function(e){if(Array.isArray(e))return nn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||en(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,n)||en(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,n){if(e){if("string"==typeof e)return nn(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?nn(e,n):void 0}}function nn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}const tn=function(){var e=Ye((0,r.useState)(function(){return function(){try{var e=window.localStorage.getItem("tricklens-save-data");if(e){var n=JSON.parse(e);return n.images&&n.images.forEach(function(e){if(e&&e.photoData){var n=Array.isArray(e.photoData)?e.photoData:Object.values(e.photoData);e.photoData=new Uint8Array(n)}}),n}return null}catch(e){return console.warn("Failed to load save data from localStorage",e),null}}()}),2),n=e[0],t=e[1],o=Ye((0,r.useState)(function(){return function(){try{var e=window.localStorage.getItem("tricklens-frame-data");if(e){var n=JSON.parse(e);if(n.data){var t=Array.isArray(n.data)?n.data:Object.values(n.data);n.data=new Uint8Array(t)}return n}return null}catch(e){return console.warn("Failed to load frame data from localStorage",e),null}}()}),2),a=o[0],i=o[1],l=Ye((0,r.useState)(ne("palette")||"sgb2h"),2),c=l[0],u=l[1],s=Ye((0,r.useState)("Select a .sav file"),2),d=s[0],f=s[1],m=Ye((0,r.useState)(!1),2),p=m[0],h=m[1],b=Ye((0,r.useState)([]),2),v=b[0],g=b[1],y=je().settings,j=Ye((0,r.useState)([]),2),w=j[0],_=j[1],S=(0,r.useRef)(null);(0,r.useEffect)(function(){_([])},[n]),(0,r.useEffect)(function(){te("palette",c)},[c]),(0,r.useEffect)(function(){n?(f(""),n.images&&n.images.some(function(e){return e&&(!e.isDeleted||y.isShowDeleted)})||f("No images found")):f("Select a .sav file")},[n,y.isShowDeleted]);var O=function(e,t){if(t){if(w.length<4){var r=n.images[e];_(function(e){return[].concat($e(e),[r])})}}else _(function(n){return n.filter(function(n){return n.index!==e})})},P=w.length>=4,k=Array.from({length:30},function(e,t){var r=null==n?void 0:n.images[t];return!r||r.isDeleted&&!y.isShowDeleted?null:(r.index=t,r)}).filter(Boolean);k.sort(function(e,n){return e.photoIndex-n.photoIndex});var T=k.filter(function(e){return!e.isDeleted}),A=k.filter(function(e){return e.isDeleted});y.isReversed&&(T.reverse(),A.reverse());var C=[].concat($e(T),$e(A));return(0,x.jsxs)(x.Fragment,{children:[n?(0,x.jsxs)("div",{className:"photoGrid scale".concat(y.scaleFactor),style:{gridTemplateColumns:"repeat(auto-fit, minmax("+160*y.scaleFactor+"px, 1fr))"},children:[C.map(function(e){var n=w.some(function(n){return n.index===e.index});return(0,x.jsx)(z,{image:e,paletteId:c,frame:a,isFramePadding:!0,scaleFactor:y.scaleFactor,showDeletedFlag:!0,onClick:function(){return g([e])},onSelect:O,isSelected:n,isDisabled:!n&&P},e.index)}),(0,x.jsx)("div",{style:{clear:"both"}})]}):null,d?(0,x.jsx)("div",{className:"mainMessage",onClick:function(){S.current&&S.current.click()},style:{cursor:"pointer"},children:d}):null,(0,x.jsx)(W,{isOpen:v.length>0,setIsOpen:g,title:"Magic",type:"full",children:(0,x.jsx)(We,{editImages:v,palette:c,frame:a,username:n?n.username:""})}),(0,x.jsx)(W,{isOpen:p,setIsOpen:h,title:"Settings",type:"small",children:(0,x.jsx)(Oe,{})}),(0,x.jsx)(Ke,{montagePhotos:w,palette:c,onClick:function(){return g(w)},onClose:function(){return _([])}}),(0,x.jsx)(pe,{palette:c,setPalette:u,saveData:n,setSaveData:t,frame:a,setFrame:i,setIsSettingsOpen:h,isSettingsOpen:p,color:y.color,count:C.length,ref:S})]})};function rn(){return(0,x.jsx)(we,{children:(0,x.jsx)(a.I9,{children:(0,x.jsx)(a.BV,{children:(0,x.jsxs)(a.qh,{path:"/",element:(0,x.jsx)(j,{}),children:[(0,x.jsx)(a.qh,{index:!0,element:(0,x.jsx)(tn,{})}),(0,x.jsx)(a.qh,{path:"*",element:(0,x.jsx)(tn,{})})]})})})})}var on=document.getElementById("root");o.createRoot(on).render((0,x.jsx)(rn,{}))}},o={};function a(e){var n=o[e];if(void 0!==n)return n.exports;var t=o[e]={id:e,exports:{}};return r[e](t,t.exports,a),t.exports}a.m=r,e=[],a.O=(n,t,r,o)=>{if(!t){var i=1/0;for(s=0;s<e.length;s++){for(var[t,r,o]=e[s],l=!0,c=0;c<t.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every(e=>a.O[e](t[c]))?t.splice(c--,1):(l=!1,o<i&&(i=o));if(l){e.splice(s--,1);var u=r();void 0!==u&&(n=u)}}return n}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[t,r,o]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};n=n||[null,t({}),t([]),t(t)];for(var l=2&r&&e;("object"==typeof l||"function"==typeof l)&&!~n.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(n=>i[n]=()=>e[n]);return i.default=()=>e,a.d(o,i),o},a.d=(e,n)=>{for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var n=a.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var t=n.getElementsByTagName("script");if(t.length)for(var r=t.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=t[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{a.b="undefined"!=typeof document&&document.baseURI||self.location.href;var e={792:0};a.O.j=n=>0===e[n];var n=(n,t)=>{var r,o,[i,l,c]=t,u=0;if(i.some(n=>0!==e[n])){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(c)var s=c(a)}for(n&&n(t);u<i.length;u++)o=i[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(s)},t=self.webpackChunktricklens_studio=self.webpackChunktricklens_studio||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})(),a.nc=void 0;var i=a.O(void 0,[268],()=>a(970));i=a.O(i)})();